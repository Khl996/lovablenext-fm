# ๐ฅ ุฏููู ุฅุนุฏุงุฏ ูุธุงู Mutqan FM ููุณุชุดูู ุฌุฏูุฏ

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ุฎุทูุงุช ุฅุนุฏุงุฏ ูุดุฑูุน ุฌุฏูุฏ ููุณุชุดูู ุจุงุณุชุฎุฏุงู Lovable. ูู ูุณุชุดูู ูุญุตู ุนูู ูุดุฑูุน ูุณุชูู ูุถูุงู ุงูุฃุฏุงุก ุงูุฃูุซู ูุนุฒู ุงูุจูุงูุงุช.

---

## ๐ ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ูู ุชููุฑ:

| ุงููุชุทูุจ | ุงููุตู |
|---------|-------|
| ุญุณุงุจ Lovable | ุญุณุงุจ ููุนูู ุนูู lovable.dev |
| ุญุณุงุจ Resend | ููุฅุดุนุงุฑุงุช ุงูุจุฑูุฏูุฉ - resend.com |
| ุญุณุงุจ Firebase (ุงุฎุชูุงุฑู) | ููุฅุดุนุงุฑุงุช ุงูููุฑูุฉ - firebase.google.com |
| ุฏูููู ููุนูู ูู Resend | ุชูุนูู ูุฑุฉ ูุงุญุฏุฉ ูููู ูุฌููุน ุงููุดุงุฑูุน |

---

## ๐ ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงููุดุฑูุน

### 1.1 ูุณุฎ ุงููุดุฑูุน ุงูุฃุณุงุณู (Remix)

1. ุงูุชุญ ุงููุดุฑูุน ุงูุฃุณุงุณู ูู Lovable
2. ุงุถุบุท ุนูู **ุงุณู ุงููุดุฑูุน** (ุฃุนูู ูุณุงุฑ)
3. ุงุฎุชุฑ **Settings**
4. ุงุถุบุท **Remix this project**
5. ุฃุฏุฎู ุงุณู ุงููุดุฑูุน ุงูุฌุฏูุฏ (ูุซุงู: `mutqan-fm-hospital-name`)

### 1.2 ุชูุนูู Cloud

ุจุนุฏ ุฅูุดุงุก ุงููุดุฑูุน:

1. Cloud ูุชูุนู ุชููุงุฆูุงู ุนูุฏ ุฃูู ุงุณุชุฎุฏุงู
2. ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ูุงุฑุบุฉ ุณุชููุดุฃ ุชููุงุฆูุงู
3. ุงูู Migrations ุณุชุนูู ุชููุงุฆูุงู ุนูุฏ ุฃูู Deploy

---

## ๐ ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ ุงูุฃุณุฑุงุฑ (Secrets)

### 2.1 ุงูุฃุณุฑุงุฑ ุงูุชููุงุฆูุฉ (ูุง ุชุญุชุงุฌ ุฅุนุฏุงุฏ)

ูุฐู ุงูุฃุณุฑุงุฑ ุชููุดุฃ ุชููุงุฆูุงู ูู Lovable Cloud:

| ุงูุณุฑ | ุงููุตู |
|-----|-------|
| `SUPABASE_URL` | ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| `SUPABASE_ANON_KEY` | ููุชุงุญ ุงููุตูู ุงูุนุงู |
| `SUPABASE_SERVICE_ROLE_KEY` | ููุชุงุญ ุงูุฎุฏูุฉ (ููู Edge Functions) |
| `SUPABASE_DB_URL` | ุฑุงุจุท ุงูุงุชุตุงู ุงููุจุงุดุฑ |
| `SUPABASE_PUBLISHABLE_KEY` | ุงูููุชุงุญ ุงูุนุงู |

### 2.2 ุฅุถุงูุฉ ููุชุงุญ Resend

#### ุงูุญุตูู ุนูู ุงูููุชุงุญ:

1. ุงุฐูุจ ุฅูู [resend.com/api-keys](https://resend.com/api-keys)
2. ุงุถุบุท **Create API Key**
3. ุฃุฏุฎู ุงุณู ูุตูู (ูุซุงู: `mutqan-hospital-xyz`)
4. ุงุฎุชุฑ **Full Access** ุฃู **Sending Access**
5. ุงูุณุฎ ุงูููุชุงุญ

#### ุฅุถุงูุฉ ุงูููุชุงุญ ูููุดุฑูุน:

1. ูู Lovableุ ุงุฐูุจ ุฅูู **Settings** โ **Cloud** โ **Secrets**
2. ุงุถุบุท **Add Secret**
3. ุฃุฏุฎู:
   - **Name**: `RESEND_API_KEY`
   - **Value**: ุงูููุชุงุญ ุงูุฐู ูุณุฎุชู
4. ุงุถุบุท **Save**

### 2.3 ุฅุถุงูุฉ ููุชุงุญ Firebase (ุงุฎุชูุงุฑู - ููุฅุดุนุงุฑุงุช ุงูููุฑูุฉ)

#### ุงูุญุตูู ุนูู ุงูููุชุงุญ:

1. ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com)
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุณุชุฎุฏู ูุดุฑูุน ููุฌูุฏ
3. ุงุฐูุจ ุฅูู **Project Settings** โ **Cloud Messaging**
4. ุงูุณุฎ **Server Key**

#### ุฅุถุงูุฉ ุงูููุชุงุญ:

1. ูู Lovable Secretsุ ุฃุถู:
   - **Name**: `FIREBASE_SERVER_KEY`
   - **Value**: Server Key ูู Firebase

---

## ๐ค ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุงููุฏูุฑ ุงูุฃูู (Global Admin)

### 3.1 ุฅูุดุงุก ุญุณุงุจ ุงููุณุชุฎุฏู

1. ุงูุชุญ ุงูุชุทุจูู (ุงุถุบุท Preview ุฃู ุงูุดุฑ ุฃููุงู)
2. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชุณุฌูู `/auth`
3. ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ

### 3.2 ุชุฑููุฉ ุงููุณุชุฎุฏู ุฅูู Global Admin

ุจูุง ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงุฑุบุฉุ ูุฌุจ ุฅุถุงูุฉ ุงูุตูุงุญูุงุช ูุฏููุงู:

#### ุงูุทุฑููุฉ 1: ุนุจุฑ SQL ูู Cloud

```sql
-- 1. ุฃููุงูุ ุงุญุตู ุนูู user_id ูู ุฌุฏูู profiles
SELECT id, email FROM profiles;

-- 2. ุฃุถู ุงูุฏูุฑ ูููุณุชุฎุฏู (ุงุณุชุจุฏู USER_ID ุจุงูู ID ุงููุนูู)
INSERT INTO user_custom_roles (user_id, role_code, hospital_id)
VALUES ('USER_ID_HERE', 'global_admin', NULL);
```

#### ุงูุทุฑููุฉ 2: ุนุจุฑ Cloud UI

1. ุงุฐูุจ ุฅูู **Cloud** โ **Database** โ **Tables**
2. ุงูุชุญ ุฌุฏูู `user_custom_roles`
3. ุฃุถู ุตู ุฌุฏูุฏ:
   - `user_id`: ID ุงููุณุชุฎุฏู ูู ุฌุฏูู profiles
   - `role_code`: `global_admin`
   - `hospital_id`: ุงุชุฑูู ูุงุฑุบ (NULL)

---

## ๐ฅ ุงูุฎุทูุฉ 4: ุฅูุดุงุก ุงููุณุชุดูู

ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ูู Global Admin:

1. ุงุฐูุจ ุฅูู **ุงูุฅุฏุงุฑุฉ** โ **ุงููุณุชุดููุงุช**
2. ุงุถุบุท **ุฅุถุงูุฉ ูุณุชุดูู**
3. ุฃุฏุฎู:
   - **ุงูุงุณู** (ุจุงูุฅูุฌููุฒูุฉ ูุงูุนุฑุจูุฉ)
   - **ุงูููุฏ** (ุฑูุฒ ูุฎุชุตุฑ ูุฑูุฏ)
   - **ุงูุนููุงู**
   - **ุงููุงุชู ูุงูุจุฑูุฏ** (ุงุฎุชูุงุฑู)
4. ุงุถุบุท **ุญูุธ**

---

## โ๏ธ ุงูุฎุทูุฉ 5: ุฅุนุฏุงุฏ ุงููุธุงู

### 5.1 ุฅุนุฏุงุฏุงุช ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ

1. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช** (Settings)
2. ูู ุชุจููุจ **ุงูุนุงู**:
   - ุฃุฏุฎู ุงุณู ุงูุชุทุจูู
   - ุงุฑูุน ุดุนุงุฑ ุงููุณุชุดูู
   - ูุนูู/ุนุทูู ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ

### 5.2 ุฅุนุฏุงุฏ ุงููููู ุงูุชูุธููู

1. **ุงููุจุงูู**: ุฅุฏุงุฑุฉ โ ุงูููุงูุน โ ุงููุจุงูู
2. **ุงูุทูุงุจู**: ููู ูุจููุ ุฃุถู ุงูุทูุงุจู
3. **ุงูุฃูุณุงู**: ููู ุทุงุจูุ ุฃุถู ุงูุฃูุณุงู
4. **ุงูุบุฑู**: ููู ูุณูุ ุฃุถู ุงูุบุฑู

### 5.3 ุฅุนุฏุงุฏ ุงููุฑู

1. ุงุฐูุจ ุฅูู **ุฅุฏุงุฑุฉ** โ **ุงููุฑู**
2. ุฃูุดุฆ ูุฑู ุงูุตูุงูุฉ (ููุฑุจุงุกุ ุชููููุ ุฅูุฎ)
3. ุญุฏุฏ ุณุงุนุงุช ุงูุนูู ููู ูุฑูู

### 5.4 ุฅุนุฏุงุฏ ุฑุจุท ุฃููุงุน ุงููุดุงูู ุจุงููุฑู

1. ุงุฐูุจ ุฅูู **ุฅุฏุงุฑุฉ** โ **ุฃููุงุน ุงููุดุงูู**
2. ุงุฑุจุท ูู ููุน ูุดููุฉ ุจุงููุฑูู ุงูููุงุณุจ

---

## ๐ฅ ุงูุฎุทูุฉ 6: ุฅุถุงูุฉ ุงููุณุชุฎุฏููู

### 6.1 ุฅูุดุงุก ุงููุณุชุฎุฏููู

1. ุงุฐูุจ ุฅูู **ุฅุฏุงุฑุฉ** โ **ุงููุณุชุฎุฏููู**
2. ุงุถุบุท **ุฅุถุงูุฉ ูุณุชุฎุฏู**
3. ุฃุฏุฎู ุงูุจูุงูุงุช ุงููุทููุจุฉ
4. ุญุฏุฏ ุงูุฏูุฑ ุงูููุงุณุจ:

| ุงูุฏูุฑ | ุงูุตูุงุญูุงุช |
|------|-----------|
| `hospital_admin` | ุฅุฏุงุฑุฉ ูุงููุฉ ูููุณุชุดูู |
| `facility_manager` | ุฅุฏุงุฑุฉ ุงููุฑุงูู ูุงูุฃุตูู |
| `maintenance_manager` | ุฅุฏุงุฑุฉ ุงูุตูุงูุฉ ูุงููุฑู |
| `supervisor` | ุงูุฅุดุฑุงู ุนูู ุงููุฑู |
| `engineer` | ูุฑุงุฌุนุฉ ุชูููุฉ |
| `technician` | ุชูููุฐ ุฃูุงูุฑ ุงูุนูู |
| `reporter` | ุงูุฅุจูุงุบ ุนู ุงููุดุงูู |

### 6.2 ุชุนููู ุงููุณุชุฎุฏููู ูููุฑู

1. ุจุนุฏ ุฅูุดุงุก ุงููุณุชุฎุฏูุ ุงุฐูุจ ูุชูุงุตููู
2. ูู ูุณู **ุงููุฑู**ุ ุฃุถูู ูููุฑูู ุงูููุงุณุจ
3. ุญุฏุฏ ุฏูุฑู ูู ุงููุฑูู (ูุงุฆุฏ/ุนุถู)

---

## โ ุงูุฎุทูุฉ 7: ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

### ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

- [ ] ุงููุดุฑูุน ููุณูุฎ ููุนูู
- [ ] Cloud ููุนูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ
- [ ] `RESEND_API_KEY` ูุถุงู
- [ ] `FIREBASE_SERVER_KEY` ูุถุงู (ุงุฎุชูุงุฑู)
- [ ] Global Admin ููุดุฃ ููุนูู
- [ ] ุงููุณุชุดูู ููุดุฃ
- [ ] ุงูุฅุนุฏุงุฏุงุช (ุงูุดุนุงุฑุ ุงูุงุณู) ูุญุฏุซุฉ
- [ ] ุงููููู ุงูุชูุธููู (ูุจุงููุ ุทูุงุจูุ ุฃูุณุงู) ููุชูู
- [ ] ุงููุฑู ููุดุฃุฉ ููุฑุจูุทุฉ ุจุฃููุงุน ุงููุดุงูู
- [ ] ุงููุณุชุฎุฏููู ููุดุฃูู ููุนูููู ูููุฑู

### ุงุฎุชุจุงุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ

- [ ] ุชุณุฌูู ุงูุฏุฎูู ูุนูู
- [ ] ุฅูุดุงุก ุฃูุฑ ุนูู ุฌุฏูุฏ
- [ ] ุงุณุชูุงู ุฅุดุนุงุฑ ุจุฑูุฏู
- [ ] ุณูุฑ ุนูู ุงูููุงููุงุช ูุนูู
- [ ] ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ ูุนูู

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ูุง ุชุตู ุงูุฅุดุนุงุฑุงุช ุงูุจุฑูุฏูุฉ

1. ุชุญูู ูู `RESEND_API_KEY` ุตุญูุญ
2. ุชุญูู ูู ุชูุนูู ุงูุฏูููู ูู Resend
3. ุชุญูู ูู ุฅุนุฏุงุฏ `emailEnabled = true` ูู ุงูุฅุนุฏุงุฏุงุช

### ูุดููุฉ: ุงููุณุชุฎุฏู ูุง ูุฑู ุงูููุงุฆู

1. ุชุญูู ูู ุชุนููู ุงูุฏูุฑ ูู `user_custom_roles`
2. ุชุญูู ูู ูุฌูุฏ ุตูุงุญูุงุช ุงูุฏูุฑ ูู `role_permissions`
3. ุชุฃูุฏ ุฃู `hospital_id` ุตุญูุญ

### ูุดููุฉ: ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุชุญูู ูู ุชูููุฐ ุฌููุน ุงูู Migrations
2. ุฃุนุฏ ูุดุฑ ุงููุดุฑูุน (Deploy)
3. ุฌุฑุจ ุชุฑููุฉ ุญุฌู Cloud Instance

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุงูุฅุถุงููุฉ:
- ุชูุซูู Lovable: [docs.lovable.dev](https://docs.lovable.dev)
- ุชูุซูู Resend: [resend.com/docs](https://resend.com/docs)

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุชุญุฏูุซ ุงููุดุงุฑูุน ุงูููุณูุฎุฉ

ุนูุฏ ุชุญุฏูุซ ุงููุดุฑูุน ุงูุฃุณุงุณู:
1. ุงูุชุญุฏูุซุงุช **ูุง ุชูุชูู ุชููุงุฆูุงู** ูููุดุงุฑูุน ุงูููุณูุฎุฉ
2. ูุฌุจ ุชุทุจูู ุงูุชุญุฏูุซุงุช ูุฏููุงู ุนุจุฑ GitHub ุฃู ูุณุฎ ุงูููุฏ

### ุงููุณุฎ ุงูุงุญุชูุงุทู

- Lovable Cloud ูุญุชูุธ ุจู backups ุชููุงุฆูุฉ
- ูููุตุญ ุจุฑุจุท ุงููุดุฑูุน ุจู GitHub ููุญูุธ ุงูุฅุถุงูู

### ุงูุฃูุงู

- ูุง ุชุดุงุฑู ุงูู Service Role Key ุฃุจุฏุงู
- ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ ูููุณุชุฎุฏููู
- ูุนูู 2FA ุนูู ุญุณุงุจุงุช ุงูุฅุฏุงุฑุฉ
